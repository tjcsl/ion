{% extends "eighth/admin/eighth_admin_page_base.html" %}

{% block css %}
    {{ block.super }}
    <style>
    .contracted {
        background-color: #e6e6e6;
    }
    #sponsor-list td {
        border: 1px solid #aaa;
        padding: 3px;
    }
    #sponsor-list td:first-child {
        text-align: center;
        width: 18px;
        padding: 3px;
    }
    #sponsor-list td:nth-child(2) {
        width: 150px;
        padding: 3px;
    }
    </style>
{% endblock %}

{% block admin_main %}
    <h4>Select a Block:</h4>

    <select class="url-param-selector" data-param="block" placeholder="Select or search for a block">
        <option value="">Select or search for a block</option>
        {% for b in blocks %}
            <option value="{{ b.id }}"{% if b == chosen_block %} selected{% endif %}>{{ b.id }}: {{ b.date }} ({{ b.block_letter}})</option>
        {% endfor %}
    </select>

    {% if chosen_block %}
    <table id="sponsor-list">
        <thead>
            <tr><th><i class="fa fa-file-text-o" title="Contracted for 8th Period"></i></th><th>Sponsor</th><th>Activity</th><th>Room</th></tr>
        </thead>
        <tbody>
            {% for sponsor, acts in sponsor_list %}
            <tr class="{% if sponsor.contracted_eighth %}contracted{% endif %}">
                <td><i class="fa fa-fw fa-{% if sponsor.contracted_eighth %}check{% else %}times{% endif %}"></i></td>
                <td>{{ sponsor.name }}</td>
                <td>{{ acts|join:", " }}</td>
                <td>{% for act in acts %}{{ act.get_true_rooms|join:", "|default:"None" }}{% if not forloop.last %} / {% endif %}{% endfor %}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% endif %}
{% endblock %}
